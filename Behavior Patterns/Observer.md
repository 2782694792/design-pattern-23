# 行为型模式 —— 观察者模式

- 当一个对象被修改时，则会自动通知依赖它的对象；

- 多个对象间存在一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新；

- 又称作发布-订阅模式、模型-视图模式；

## 模式组成

1. Subject: 抽象目标类，提供了一个用于保存观察者对象的聚集类和管理观察者对象的方法，以及通知所有观察者的抽象方法；

2. Concrete Subject: 具体目标类，实现 Subject 通知方法，当内部状态发生改变时，通知所有注册过的观察者对象；

3. Observer: 抽象观察者，包含一个目标对象的依赖和一个更新自身（状态）的抽象方法，当接收到 Concrete Subject 的更改通知时被调用；

4. Concrete Observer: 具体观察者，实现 Observer 完成注册申请和状态更新。

## 利弊

`优点`

1. 降低目标与观察者之间的耦合关系，抽象耦合关系；

2. 目标与观察者之间建立了一套触发机制；

`缺点`

1. 目标与观察者之间的依赖关系并没有完全解除，有可能出现循环引用；

2. 当观察者对象很多时，通知会花费更多时间，影响程序效率；

3. 没有相应的机制让观察者知道所观察的目标对象是怎么发生变化的，而仅仅只是知道观察目标发生了变化。

## 使用场景

- 对象间存在一对多关系，一个对象的状态发生改变会影响其他对象；

- 一个对象的改变将导致其他一个或多个对象也发生改变，而不知道具体有多少对象将发生改变，也并不知道这些对象是谁;

- 需要在系统中创建一个触发链，A对象的行为将影响B对象，B对象的行为将影响C对象……(创建一种链式触发机制)。

## 场景示例

1. 人民币汇率的升降导致产品的成本变化，从而导致产品的销售和利润；

2. 学习下课铃声的开启，学生明确上课或下课；